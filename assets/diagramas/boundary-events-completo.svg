<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 800">
  <defs>
    <style>
      .bg { fill: #1a1a2e; }
      .title { fill: #ffffff; font-family: 'Inter', sans-serif; font-size: 24px; font-weight: 600; }
      .subtitle { fill: #b0b0b0; font-family: 'Inter', sans-serif; font-size: 14px; }
      .label { fill: #ffffff; font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 500; }
      .small-text { fill: #00d4ff; font-family: 'Inter', sans-serif; font-size: 11px; }
      .task-rect { fill: #2a2a3e; stroke: #ffffff; stroke-width: 2.5; }
      .boundary { fill: #ff6b6b; stroke: #ff6b6b; stroke-width: 2; }
      .boundary-non { fill: none; stroke: #ff6b6b; stroke-width: 2; stroke-dasharray: 3,3; }
      .event { fill: none; stroke: #00d4ff; stroke-width: 2; }
      .event-end { fill: #00d4ff; stroke: #00d4ff; stroke-width: 2; }
      .arrow { fill: none; stroke: #ffffff; stroke-width: 2; marker-end: url(#arrowhead); }
      .exception-arrow { fill: none; stroke: #ff6b6b; stroke-width: 2; marker-end: url(#exception-arrow); }
      .icon { fill: none; stroke: #ff6b6b; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ffffff" />
    </marker>
    <marker id="exception-arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ff6b6b" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect class="bg" width="1400" height="800" rx="10"/>
  
  <!-- Title -->
  <text class="title" x="700" y="40" text-anchor="middle">Boundary Events (Eventos de Frontera)</text>
  <text class="subtitle" x="700" y="65" text-anchor="middle">Manejo de excepciones durante la ejecución de actividades</text>
  
  <!-- Section 1: Interrupting Boundary Event -->
  <g transform="translate(100, 120)">
    <text class="label" x="0" y="0" font-size="16">1. Boundary Event Interrupting (Interrumpe la tarea)</text>
    <text class="small-text" x="0" y="25">Cuando ocurre el evento, la tarea se CANCELA</text>
    
    <!-- Main flow -->
    <circle class="event" cx="50" cy="90" r="18"/>
    <text class="subtitle" x="50" y="125" text-anchor="middle" font-size="10">Inicio</text>
    
    <path class="arrow" d="M 68 90 L 110 90"/>
    
    <!-- Task with boundary event -->
    <rect class="task-rect" x="110" y="50" width="220" height="80" rx="8"/>
    <text class="label" x="220" y="85" text-anchor="middle">Procesar pedido</text>
    <text class="subtitle" x="220" y="105" text-anchor="middle" font-size="11">(puede tardar hasta 24h)</text>
    
    <!-- Timer boundary event (solid border = interrupting) -->
    <circle class="boundary" cx="300" cy="130" r="16"/>
    <circle class="boundary" cx="300" cy="130" r="12"/>
    <!-- Timer icon -->
    <circle class="icon" cx="300" cy="130" r="8"/>
    <line class="icon" x1="300" y1="130" x2="300" y2="124"/>
    <line class="icon" x1="300" y1="130" x2="304" y2="134"/>
    
    <text class="subtitle" x="300" y="160" text-anchor="middle" font-size="9">24h timeout</text>
    
    <!-- Normal flow -->
    <path class="arrow" d="M 330 90 L 380 90"/>
    <rect class="task-rect" x="380" y="65" width="150" height="50" rx="5"/>
    <text class="label" x="455" y="95" text-anchor="middle" font-size="12">Enviar factura</text>
    
    <path class="arrow" d="M 530 90 L 580 90"/>
    <circle class="event-end" cx="598" cy="90" r="18"/>
    <text class="subtitle" x="598" y="125" text-anchor="middle" font-size="10">Fin OK</text>
    
    <!-- Exception flow -->
    <path class="exception-arrow" d="M 300 146 L 300 200 L 455 200"/>
    <rect class="task-rect" x="455" y="175" width="150" height="50" rx="5"/>
    <text class="label" x="530" y="205" text-anchor="middle" font-size="12">Cancelar pedido</text>
    
    <path class="arrow" d="M 605 200 L 650 200"/>
    <circle class="event-end" cx="668" cy="200" r="18"/>
    <text class="subtitle" x="668" y="235" text-anchor="middle" font-size="10">Fin timeout</text>
    
    <!-- Note -->
    <g transform="translate(0, 260)">
      <rect fill="#2a2a3e" x="0" y="0" width="680" height="60" rx="5"/>
      <text class="small-text" x="15" y="25" font-weight="600">⚠️ INTERRUPTING (borde sólido):</text>
      <text class="subtitle" x="15" y="45" font-size="11">Si el timer se activa, "Procesar pedido" se CANCELA y va directo a "Cancelar pedido"</text>
    </g>
  </g>
  
  <!-- Section 2: Non-Interrupting Boundary Event -->
  <g transform="translate(100, 480)">
    <text class="label" x="0" y="0" font-size="16">2. Boundary Event Non-Interrupting (NO interrumpe la tarea)</text>
    <text class="small-text" x="0" y="25">La tarea CONTINÚA ejecutándose + se activa flujo paralelo</text>
    
    <!-- Main flow -->
    <circle class="event" cx="50" cy="90" r="18"/>
    <text class="subtitle" x="50" y="125" text-anchor="middle" font-size="10">Inicio</text>
    
    <path class="arrow" d="M 68 90 L 110 90"/>
    
    <!-- Task with non-interrupting boundary event -->
    <rect class="task-rect" x="110" y="50" width="220" height="80" rx="8"/>
    <text class="label" x="220" y="85" text-anchor="middle">Procesar pedido</text>
    <text class="subtitle" x="220" y="105" text-anchor="middle" font-size="11">(proceso largo)</text>
    
    <!-- Timer boundary event (dashed border = non-interrupting) -->
    <circle class="boundary-non" cx="300" cy="130" r="16"/>
    <circle class="boundary-non" cx="300" cy="130" r="12"/>
    <!-- Timer icon -->
    <circle class="icon" cx="300" cy="130" r="8"/>
    <line class="icon" x1="300" y1="130" x2="300" y2="124"/>
    <line class="icon" x1="300" y1="130" x2="304" y2="134"/>
    
    <text class="subtitle" x="300" y="160" text-anchor="middle" font-size="9">Cada 2h</text>
    
    <!-- Normal flow continues -->
    <path class="arrow" d="M 330 90 L 380 90"/>
    <rect class="task-rect" x="380" y="65" width="150" height="50" rx="5"/>
    <text class="label" x="455" y="95" text-anchor="middle" font-size="12">Enviar factura</text>
    
    <path class="arrow" d="M 530 90 L 580 90"/>
    <circle class="event-end" cx="598" cy="90" r="18"/>
    <text class="subtitle" x="598" y="125" text-anchor="middle" font-size="10">Fin OK</text>
    
    <!-- Parallel exception flow (doesn't interrupt) -->
    <path class="exception-arrow" d="M 300 146 L 300 200 L 380 200"/>
    <rect class="task-rect" x="380" y="175" width="150" height="50" rx="5"/>
    <text class="label" x="455" y="205" text-anchor="middle" font-size="12">Enviar recordatorio</text>
    
    <path class="arrow" d="M 530 200 L 580 200"/>
    <circle class="event-end" cx="598" cy="200" r="18"/>
    <text class="subtitle" x="598" y="235" text-anchor="middle" font-size="10">Fin recordatorio</text>
    
    <!-- Note -->
    <g transform="translate(0, 260)">
      <rect fill="#2a2a3e" x="0" y="0" width="680" height="60" rx="5"/>
      <text class="small-text" x="15" y="25" font-weight="600">✅ NON-INTERRUPTING (borde punteado):</text>
      <text class="subtitle" x="15" y="45" font-size="11">"Procesar pedido" continúa + cada 2h se envía un recordatorio en paralelo</text>
    </g>
  </g>
  
  <!-- Comparison table -->
  <g transform="translate(800, 120)">
    <text class="label" x="0" y="0" font-size="16">Tipos Comunes de Boundary Events</text>
    
    <rect fill="#2a2a3e" x="0" y="20" width="500" height="600" rx="5"/>
    
    <!-- Header -->
    <text class="small-text" x="20" y="50" font-weight="600">Tipo</text>
    <text class="small-text" x="150" y="50" font-weight="600">Icono</text>
    <text class="small-text" x="280" y="50" font-weight="600">Uso</text>
    
    <!-- Timer -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="65" x2="485" y2="65"/>
    <text class="subtitle" x="20" y="85" font-size="12">Timer</text>
    <g transform="translate(150, 70)">
      <circle class="boundary" cx="15" cy="15" r="14"/>
      <circle class="boundary" cx="15" cy="15" r="10"/>
      <circle class="icon" cx="15" cy="15" r="7"/>
      <line class="icon" x1="15" y1="15" x2="15" y2="10"/>
      <line class="icon" x1="15" y1="15" x2="18" y2="18"/>
    </g>
    <text class="subtitle" x="280" y="85" font-size="11">Timeouts, plazos</text>
    
    <!-- Error -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="110" x2="485" y2="110"/>
    <text class="subtitle" x="20" y="130" font-size="12">Error</text>
    <g transform="translate(150, 115)">
      <circle class="boundary" cx="15" cy="15" r="14"/>
      <circle class="boundary" cx="15" cy="15" r="10"/>
      <path class="icon" d="M 15 8 L 15 17 M 15 20 L 15 22"/>
    </g>
    <text class="subtitle" x="280" y="130" font-size="11">Fallos técnicos</text>
    
    <!-- Message -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="155" x2="485" y2="155"/>
    <text class="subtitle" x="20" y="175" font-size="12">Message</text>
    <g transform="translate(150, 160)">
      <circle class="boundary" cx="15" cy="15" r="14"/>
      <circle class="boundary" cx="15" cy="15" r="10"/>
      <rect class="icon" x="8" y="10" width="14" height="10" rx="1"/>
      <path class="icon" d="M 8 10 L 15 15 L 22 10"/>
    </g>
    <text class="subtitle" x="280" y="175" font-size="11">Mensajes externos</text>
    
    <!-- Escalation -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="200" x2="485" y2="200"/>
    <text class="subtitle" x="20" y="220" font-size="12">Escalation</text>
    <g transform="translate(150, 205)">
      <circle class="boundary-non" cx="15" cy="15" r="14"/>
      <circle class="boundary-non" cx="15" cy="15" r="10"/>
      <path class="icon" d="M 15 22 L 15 12 L 10 17 M 15 12 L 20 17"/>
    </g>
    <text class="subtitle" x="280" y="220" font-size="11">Notificar superior</text>
    
    <!-- Compensation -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="245" x2="485" y2="245"/>
    <text class="subtitle" x="20" y="265" font-size="12">Compensation</text>
    <g transform="translate(150, 250)">
      <circle class="boundary" cx="15" cy="15" r="14"/>
      <circle class="boundary" cx="15" cy="15" r="10"/>
      <path class="icon" d="M 18 10 L 12 15 L 18 20"/>
      <path class="icon" d="M 22 10 L 16 15 L 22 20"/>
    </g>
    <text class="subtitle" x="280" y="265" font-size="11">Revertir transacción</text>
    
    <!-- Cancellation -->
    <line stroke="#00d4ff" stroke-width="1" x1="15" y1="290" x2="485" y2="290"/>
    <text class="subtitle" x="20" y="310" font-size="12">Cancellation</text>
    <g transform="translate(150, 295)">
      <circle class="boundary" cx="15" cy="15" r="14"/>
      <circle class="boundary" cx="15" cy="15" r="10"/>
      <path class="icon" d="M 10 10 L 20 20 M 20 10 L 10 20"/>
    </g>
    <text class="subtitle" x="280" y="310" font-size="11">Cancelar transacción</text>
    
    <!-- Key difference -->
    <g transform="translate(20, 350)">
      <text class="label" x="0" y="0" font-size="14">Diferencia Clave:</text>
      
      <g transform="translate(0, 25)">
        <circle class="boundary" cx="15" cy="0" r="12"/>
        <circle class="boundary" cx="15" cy="0" r="9"/>
        <text class="subtitle" x="40" y="5" font-size="11">Borde SÓLIDO = Interrupting</text>
        <text class="subtitle" x="40" y="22" font-size="10">→ Cancela la tarea</text>
      </g>
      
      <g transform="translate(0, 70)">
        <circle class="boundary-non" cx="15" cy="0" r="12"/>
        <circle class="boundary-non" cx="15" cy="0" r="9"/>
        <text class="subtitle" x="40" y="5" font-size="11">Borde PUNTEADO = Non-Interrupting</text>
        <text class="subtitle" x="40" y="22" font-size="10">→ Tarea continúa + flujo paralelo</text>
      </g>
    </g>
    
    <!-- Examples -->
    <g transform="translate(20, 500)">
      <text class="small-text" x="0" y="0" font-weight="600">Ejemplos de uso:</text>
      <text class="subtitle" x="0" y="20" font-size="10">• Timer: "Si tarda >2h, cancelar"</text>
      <text class="subtitle" x="0" y="38" font-size="10">• Error: "Si falla el pago, notificar"</text>
      <text class="subtitle" x="0" y="56" font-size="10">• Message: "Si llega cancelación, abortar"</text>
      <text class="subtitle" x="0" y="74" font-size="10">• Escalation: "Avisar al jefe sin detener"</text>
    </g>
  </g>
</svg>
